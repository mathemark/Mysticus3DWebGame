{"ast":null,"code":"import _regeneratorRuntime from\"/Users/markmathe/Downloads/Mysticus3DWebGame/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/markmathe/Downloads/Mysticus3DWebGame/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/markmathe/Downloads/Mysticus3DWebGame/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{loginUser}from'./utils.js';import{logoutUser}from'./utils.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Modal=function Modal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,isLoggedIn=_ref.isLoggedIn,onLogout=_ref.onLogout;//Állapotok deklarálása\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var name=localStorage.getItem('username');//Állapotkezelővel történő felhasználó név tárolása\nvar handleUsernameChange=function handleUsernameChange(e){setUsername(e.target.value);};//Állapotkezelővel történő jelszó tárolás\nvar handlePasswordChange=function handlePasswordChange(e){setPassword(e.target.value);};//Felhasználó bejelentkezése, adatbázison keresztül\nvar handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var credentials;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();credentials={username:username,password:password};loginUser(credentials,username);case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();//Felhasználó kijelentkezése adatbázisból\nvar handleLogout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();logoutUser();case 2:case\"end\":return _context2.stop();}},_callee2);}));return function handleLogout(_x2){return _ref3.apply(this,arguments);};}();//A jelszó csere oldalra való átirányítás\nvar handleChangePasword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:e.preventDefault();window.location.href=\"/changepassword\";case 2:case\"end\":return _context3.stop();}},_callee3);}));return function handleChangePasword(_x3){return _ref4.apply(this,arguments);};}();//Ha a felhasználó be van jelentkezve. \nif(isLoggedIn){//Logout modal UI\nreturn/*#__PURE__*/_jsx(_Fragment,{children:isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal delayed\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal-button-style-small-left\",onClick:onClose,children:\"Close\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"LOGOUT\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"LOGGED IN AS: \",/*#__PURE__*/_jsx(\"span\",{children:name})]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-button-style-small\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-button-style-small-chgpswd\",onClick:handleChangePasword,children:\"CHANGE PASSWORD\"})]})]})})});}return/*#__PURE__*/ (//Login modal UI\n_jsx(_Fragment,{children:isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal delayed\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal-button-style-small-left\",onClick:onClose,children:\"CLOSE\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"USERNAME\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"modal-login-input\",value:username,onChange:handleUsernameChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"PASSWORD\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"modal-login-input\",value:password,onChange:handlePasswordChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-button-style-small\",type:\"submit\",children:\"Login\"})]})]})]})})}));};export default Modal;","map":{"version":3,"names":["React","useState","loginUser","logoutUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Modal","_ref","isOpen","onClose","isLoggedIn","onLogout","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","name","localStorage","getItem","handleUsernameChange","e","target","value","handlePasswordChange","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","credentials","wrap","_callee$","_context","prev","next","preventDefault","stop","_x","apply","arguments","handleLogout","_ref3","_callee2","_callee2$","_context2","_x2","handleChangePasword","_ref4","_callee3","_callee3$","_context3","window","location","href","_x3","children","className","onClick","onSubmit","type","onChange"],"sources":["/Users/markmathe/Downloads/Mysticus3DWebGame/app/src/components/modal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { loginUser } from './utils.js';\nimport { logoutUser } from './utils.js';\nconst Modal = ({ isOpen, onClose, isLoggedIn, onLogout }) => {\n\n    //Állapotok deklarálása\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const name = localStorage.getItem('username');\n    \n    //Állapotkezelővel történő felhasználó név tárolása\n    const handleUsernameChange = (e) => {\n        setUsername(e.target.value);\n    };\n    //Állapotkezelővel történő jelszó tárolás\n    const handlePasswordChange = (e) => {\n        setPassword(e.target.value);\n    };\n\n    //Felhasználó bejelentkezése, adatbázison keresztül\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const credentials = {\n            username: username,\n            password: password\n        }\n        loginUser(credentials, username);\n    };\n    //Felhasználó kijelentkezése adatbázisból\n    const handleLogout = async (e) => {\n        e.preventDefault();   \n        logoutUser();\n    };\n\n    //A jelszó csere oldalra való átirányítás\n    const handleChangePasword = async (e) => {\n        e.preventDefault();\n        window.location.href = \"/changepassword\";\n    }\n\n    //Ha a felhasználó be van jelentkezve. \n    if (isLoggedIn) { \n        \n        //Logout modal UI\n        return (\n            <>\n                {isOpen && (\n                    <div className=\"modal\">\n                        <div className=\"modal delayed\">\n                            <button className=\"modal-button-style-small-left\" onClick={onClose}>Close</button>\n                            <div className=\"modal-content\">\n                                <h2>LOGOUT</h2>\n                                {/*Modal errornak itt volt a helye,<form onClose = {handleLogout}>  */}\n                                <form>\n                                    <label>\n                                        LOGGED IN AS: <span>{name}</span>\n                                    </label>\n                                    <button className=\"modal-button-style-small\" onClick={handleLogout}>Logout</button>\n                                   \n                                </form>\n                                <button className=\"modal-button-style-small-chgpswd\" onClick={handleChangePasword}>CHANGE PASSWORD</button>\n                                \n                            </div>\n                        </div>\n\n                    </div>\n                )}\n            </>\n        );\n    }\n\n    return (\n        //Login modal UI\n        <>\n            {isOpen && (\n                <div className=\"modal\">\n                    <div className=\"modal delayed\">\n                        <button className=\"modal-button-style-small-left\" onClick={onClose}>CLOSE</button>\n                        <div className=\"modal-content\">\n                            <h2>LOGIN</h2>\n                            <form onSubmit={handleSubmit}>\n                                <label>\n                                    USERNAME\n                                    <input type=\"text\" className= \"modal-login-input\" value={username} onChange={handleUsernameChange} />\n                                </label>\n                                <label>\n                                    PASSWORD\n                                    <input type=\"password\" className=\"modal-login-input\" value={password} onChange={handlePasswordChange} />\n                                </label>                          \n                                <button className=\"modal-button-style-small\" type=\"submit\">Login</button>\n                            </form> \n                            \n                        </div>\n                    </div>\n\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default Modal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}